# Spring and Mybatis Framework

---

## pom.xml

before `<dependencies>` tag

```xml
 <!-- Maven repository 중앙 저장소에서 제공하지 않아서 따로 지정해줌 -->
 <repositories>
  <repository>
   <id>Datanucleus</id>
   <url>https://www.datanucleus.org/downloads/maven2/</url>
  </repository>
 </repositories>
```

under `<dependencies>` tag

```xml
  <!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc -->
  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-jdbc</artifactId>
   <version>${org.springframework-version}</version>
  </dependency>

  <!-- https://mvnrepository.com/artifact/oracle/ojdbc6 -->
  <dependency>
   <groupId>oracle</groupId>
   <artifactId>ojdbc6</artifactId>
   <version>11.2.0.3</version>
  </dependency>

  <!-- https://mvnrepository.com/artifact/commons-dbcp/commons-dbcp -->
  <dependency>
   <groupId>commons-dbcp</groupId>
   <artifactId>commons-dbcp</artifactId>
   <version>1.4</version>
  </dependency>

  <!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple -->
  <dependency>
   <groupId>com.googlecode.json-simple</groupId>
   <artifactId>json-simple</artifactId>
   <version>1.1.1</version>
  </dependency>

<!-- https://mvnrepository.com/artifact/com.google.code.gson/gson -->
  <dependency>
   <groupId>com.google.code.gson</groupId>
   <artifactId>gson</artifactId>
   <version>2.11.0</version>
  </dependency>
```

---

## mybatis 추가 설정

maven repository 에서 mybatis 검색해서 제일 처음 나오는거

```xml
<!-- https://mvnrepository.com/artifact/org.mybatis/mybatis -->
<dependency>
  <groupId>org.mybatis</groupId>
  <artifactId>mybatis</artifactId>
  <version>3.5.5</version>
</dependency>
```

mybatis 검색해서 mybatis spring

```xml
<!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring -->
<dependency>
  <groupId>org.mybatis</groupId>
  <artifactId>mybatis-spring</artifactId>
  <version>2.0.5</version>
</dependency>
```

---

## mybatis 설정

xml > xml catalog 전에 했던거

---

## 추가 web.xml 설정

```xml
<!-- Processes application requests -->
<servlet>
  <servlet-name>appServlet</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet
  </servlet-class>
  <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/appServlet/servlet-context.xml
    `classpath:applicationContext.xml`</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>
```

---

applicationContext.xml 파일 `beans` 태그 안에

```xml
<bean id="dataSource"
  class="org.apache.commons.dbcp.BasicDataSource">
  <property name="driverClassName"
    value="oracle.jdbc.driver.OracleDriver" />
  <property name="url"
    value="jdbc:oracle:thin:@127.0.0.1:1521:xe" />
  <property name="username" value="spring" />
  <property name="password" value="1234" />
</bean>

<!-- 이 부분이 다름 -->
<bean id="sqlSession"
  class="org.mybatis.spring.SqlSessionFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="configLocation"
    value="classPath:mybatis-config.xml" />
  <property name="mapperLocations"
    value="classPath:mapper/*.xml" />
</bean>

<bean id="sqlSessionTemplate"
  class="org.mybatis.spring.SqlSessionTemplate">
  <constructor-arg index="0" ref="sqlSession" />
</bean>
```

---

### alias 설정

```xml
    <typeAliases>
        <typeAlias type="kr.or.iei.member.model.vo.Member" alias="member"/>
    </typeAliases>

```
