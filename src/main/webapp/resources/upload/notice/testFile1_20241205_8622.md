# Spring Framework ì„¤ì •

---

[Trouble shooting](#trouble-shooting)
[IntelliJ Setting](#intellij-ì—ì„œ-ì—´ê¸°)

---

## 1. apache maven í´ë”ë¥¼ c ë“œë¼ì´ë¸Œì—ì„œ ì••ì¶•í’€ê³ ì„œ ì•ˆì—ë‹¤ê°€ repository í´ë” ìƒì„±

`C:\apache-maven-3.9.1\repository` ì´ ê²½ë¡œë¥¼ ë³µì‚¬
`C:\apache-maven-3.9.1\repository\conf` ê²½ë¡œ ì•„ë˜ `settings.xml` íŒŒì¼ì—ì„œ

```xml
<settings xmlns="http://maven.apache.org/SETTINGS/1.2.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd">
  <!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ${user.home}/.m2/repository
  <localRepository>/path/to/local/repo</localRepository>
  -->
```

ì´ ë¶€ë¶„ì„ ì°¾ì•„ì„œ ì£¼ì„ ë°–ì— `<localRepository>` íƒœê·¸ ë§Œë“¤ê³  ê²½ë¡œë¥¼ ì¶”ê°€

```xml
<localRepository>C:\apache-maven-3.9.1\repository</localRepository>
```

ê·¸ë¦¬ê³  ì €ì¥

---

[Maven repository](https://mvnrepository.com/) ì—ì„œ .jar íŒŒì¼ì„ ì“°ëŠ”ë° í•„ìš”í•œ .xml íŒŒì¼ì˜ source code ë¥¼ ê°€ì ¸ë‹¤ê°€ ì“¸ ìˆ˜ ìˆìŒ

---

## 2. spring tool suite íŒŒì¼ì„ ë°”íƒ•í™”ë©´ì— ì••ì¶• í’€ê¸°

sts.exe (eclipse ê¸°ë°˜ ì—ë””í„°)ë¥¼ ì‘ì—…í‘œì‹œì¤„ì— ê³ ì •

## 3. Amazon Correcto JDK 11 ì„ ì„¤ì¹˜

cmd ì—ì„œ

``` powershell
java -version
```

ìœ¼ë¡œ ìë°” ë²„ì ¼ í™•ì¸

## 4. sts.exe ì‹¤í–‰

c ë“œë¼ì´ë¸Œì— spring-workspace í´ë” ìƒì„±í•˜ê³  ê²½ë¡œë¡œ ì¡ìŒ

---

## 5. Window/Preferences ì„¤ì •

- `spelling`: `utf-8` ë¡œ ì„¤ì •
general ë°‘ì— `workspace utf-8` ë¡œ ì„¤ì •
json > json files ì¸ì½”ë”©: `ISO 10646/Unicode(UTF-8)`
web > CSS Files, HTML Files, JSP Files ëª¨ë‘: `ISO 10646/Unicode(UTF-8)`

server > runtime environments > ê¸°ë³¸ìœ¼ë¡œ ìˆëŠ”ê±° ì‚­ì œ í•˜ê³ ì„œ
apache tomcat 9.0 ì„ ì¶”ê°€
jre ëŠ” ì•„ê¹Œ ì„¤ì¹˜í•œ 11 ë²„ì ¼

## 6. ì´ì œ ì„œë²„ë„ apache tomcat ìœ¼ë¡œ ìƒì„±

ì„œë²„ í¬ë“œ ì„¤ì • 80 ìœ¼ë¡œ í•˜ê³  ì˜ˆì „ì— í•˜ë˜ê±° ê·¸ëŒ€ë¡œ

---

## 7. í”„ë¡œì íŠ¸ ìƒì„± spring legacy project í•˜ê³ ì„œ íŒì—…ì°½ê¹Œì§€ ëœ¨ê³  ë‚˜ë©´

C:\spring-workspace\.metadata\.plugins\org.springsource.ide.eclipse.commons.content.core

íŒŒì¼ì•ˆì—ë‹¤ê°€ https-content.xml íŒŒì¼ì„ ë„£ëŠ”ë‹¤

ê·¸ë¦¬ê³  ë‹¤ì‹œ ëŒì•„ì™€ì„œ spring legacy project ë§Œë“¤ê¸° í•˜ë©´ ë§‰ ë‹¤ë¥¸ íŒŒì¼ë“¤ë„ ìƒê²¨ ìˆìŒ

templates ë°‘ì— spring mvc project ë¼ê³  ìˆìŒ

ê·¸ê±° ì„ íƒí•˜ê³  ì´ë¦„ë„ ì§€ì •í•˜ê³ ì„œ ë‹¤ìš´ë°›ê³  next

ê·¸ë¦¬ê³  ìµœìƒìœ„ `package` ê²½ë¡œ `kr.or.iei` ìœ¼ë¡œ ì§€ì •

## 8. window > preferences > maven > user setting ì—ì„œ

ì•„ê¹Œ ë§Œë“  C:\apache-maven-3.9.1\conf ì—ì„œ settings.xml íŒŒì¼ì„ ì„ íƒí•´ì¤€ë‹¤

## 9. pom.xml ì•ˆì—ë‹¤ê°€ ì„¤ì •ì„ í•´ì£¼ë©´ ìë™ìœ¼ë¡œ library ë¥¼ ì„¤ì¹˜ í•´ì¤€ë‹¤

pom.xml ì—ì„œ overview íƒ­ properties íƒ­ì—ì„œ
java-version : 11
org.springframework-version:5.0.6 ìœ¼ë¡œ

ê·¸ë¦¬ê³  ë‹¤ì‹œ `pom.xml` íƒ­ìœ¼ë¡œ ì—´ì–´ì„œ `source`, `target` íƒœê·¸ ì•ˆì— 11 ë¡œ ë°”ê¿”ì¤Œ

```xml
<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-compiler-plugin</artifactId>
   <version>2.5.1</version>
   <configuration>
   <source>11</source>
   <target>11</target>
   <compilerArgument>-Xlint:all</compilerArgument>
   <showWarnings>true</showWarnings>
   <showDeprecation>true</showDeprecation>
   </configuration>
</plugin>
```

---

## 10. project ì„¤ì • properties > java build path > library > jre - edit - workspace default (jdk 11) ë¡œ ì„¤ì •

java compiler ì„¤ì •ë„ 11 ë¡œ ìˆ˜ì •
project facets dynamic web module 4.0
java 11

targeted runtimes ì—ì„œ ì•„íŒŒì¹˜ ì„ íƒ

web project setting > context root : /

deployment assembly ì—ì„œ maven dependencies ìˆëŠ”ì§€ í™•ì¸

-- customize shortcut ì—ì„œ ì›ë˜ í•˜ë˜ë°ë¡œ ì¶”ê°€í•˜ê³ 

## 11. src/main/webapp/ ì—ë‹¤ê°€ index.jsp ìƒì„±

-- ì´ì œ ì„œë²„ ì‹¤í–‰ë¨

web.xml ì—ì„œ dispatcherservlet ì„¤ì •ì„ ì—¬ê¸°ì„œí•¨
í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ì´ê²Œ ì œì¼ ë¨¼ì € ì‹¤í–‰ë¨

web.xml íŒŒì¼ ì œì¼ ìœ„ `<context-param>` íƒœê·¸ ìœ„ì—ë‹¤ê°€ ë‹¤ìŒê³¼ ê°™ì´ encodingfilter ì„¤ì •ì„ í•´ì¤Œ

```xml
<filter>
    <filter-name>characterEncoding</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
    <param-name>encoding</param-name>
    <param-value>utf-8</param-value>
    </init-param>
</filter>
    <filter-mapping>
    <filter-name>characterEncoding</filter-name>
    <url-pattern>*.kh</url-pattern>
</filter-mapping>
```

`<filter-class>` íƒœê·¸ ì•ˆì— ê°’ì— ctrl+í´ë¦­í•˜ë©´ ì´ë™ì´ ë˜ëŠ”ì§€ í™•ì¸
ê·¸ë¦¬ê³  ì•„ë˜ì—  

```xml
<servlet-mapping>
  <servlet-name>appServlet</servlet-name>
  <url-pattern>/</url-pattern>
</servlet-mapping>
```

ê¸€ ë³µì‚¬í•´ì„œ

```xml
<servlet-mapping>
<servlet-name>appServlet</servlet-name>
<url-pattern>*.kh</url-pattern>
</servlet-mapping>
```

ìœ¼ë¡œ ìˆ˜ì •í•´ì„œ í•˜ë‚˜ ë” ì‘ì„±

-- data base ì—°ë™ì„ í• ë•ŒëŠ” pom.xml íŒŒì¼ `<properties>` íƒœê·¸ ë°‘ì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±

 ```xml
<!-- Maven repository ì¤‘ì•™ ì €ì¥ì†Œì—ì„œ ì œê³µí•˜ì§€ ì•Šì•„ì„œ ë”°ë¡œ ì§€ì •í•´ì¤Œ -->
<repositories>
  <repository>
    <id>Datanucleus</id>
    <url>https://www.datanucleus.org/downloads/maven2/</url>
  </repository>
</repositories>

<dependencies>
  <!-- https://mvnrepository.com/artifact/oracle/ojdbc6 -->
  <dependency>
    <groupId>oracle</groupId>
    <artifactId>ojdbc6</artifactId>
    <version>11.2.0.3</version>
  </dependency>

  <!-- DBCP data base connection pool -->
  <!-- https://mvnrepository.com/artifact/commons-dbcp/commons-dbcp -->
  <dependency>
    <groupId>commons-dbcp</groupId>
    <artifactId>commons-dbcp</artifactId>
    <version>1.4</version>
  </dependency>

  <!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc -->
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>${org.springframework-version}</version>
</dependency>
```

ê·¸ëŸ¬ë©´ Maven Dependencies ë°‘ì— ì¶”ê°€ë˜ì–´ì§„ë‹¤
ì—†ìœ¼ë©´ project ìš°í´ë¦­ maven > update project... í•œë‹¤
ê°€ë” ê°€ë‹¤ê°€ ì„¤ì •ì´ìƒí•´ì§€ëŠ” ê²½ìš° ìˆëŠ”ë° ë‹¤ì‹œ í•´ì£¼ë©´ ë¨ build path, compiler...

-- src/main/resources ë°‘ì—
new spring bean definition file ì„ íŒŒì¼ëª… : applicationContext.xml

next ì—ì„œ bean > 4.3, context > 4.3, p ì„ íƒ í•˜ê³ ì„œ ìƒì„±
`<beans>` íƒœê·¸ ì•ˆì— ì•„ë˜ì™€ ê°™ì´ ì‘ì„±

```xml
 <!-- JdbcTemplate ë¥¼ Bean ìœ¼ë¡œ IoC ì»¨í…Œì´ë„ˆì— ë“±ë¡í•˜ëŠ”ê²ƒ -->
 <bean id="dataSource"
  class="org.apache.commons.dbcp.BasicDataSource">
  <property name="driverClassName"
   value="oracle.jdbc.driver.OracleDriver" />
  <property name="url"
   value="jdbc:oracle:thin:@127.0.0.1:1521:xe" />
  <property name="username" value="spring" />
  <property name="password" value="1234" />
 </bean>

 <bean id="jdbcTemplate"
  class="org.springframework.jdbc.core.JdbcTemplate">
  <property name="dataSource" ref="dataSource" />
 </bean>
 ```

-- web.xml íŒŒì¼ ì—ë„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •

`<param-value>` íƒœê·¸ ì•ˆì— `Classpath:applicationContext.xml` ë¶€ë¶„ì„ ì¶”ê°€

```xml
<!-- Processes application requests -->
<servlet>
  <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/appServlet/servlet-context.xml
    Classpath:applicationContext.xml</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>
```

-- `taglib`ëŠ” ë²„ê·¸ê°€ ìˆì–´ì„œ ì§ì ‘ /WEB-INF/lib/ ì•ˆì—ë‹¤ê°€ ì¶”ê°€í•´ì¤€ë‹¤

---

## Trouble Shooting

ì›ì¸ : ì²˜ìŒì— maven í´ë” ë°‘ì— repository í´ë”ë¥¼ ë§Œë“¤ë•Œ ì˜¤íƒ€ê°€ ìˆì–´ì„œ conf/settings.xml íŒŒì¼ì—ë„ ì˜¤íƒ€ ê·¸ëŒ€ë¡œ ê²½ë¡œë¥¼ ì§€ì •í–ˆë‹¤ê°€ ìˆ˜ì •í•˜ë‹ˆê¹Œ
ì¦ìƒ : í”„ë¡œì íŠ¸ì—ì„œ jar íŒŒì¼ë“¤ì„ ë°›ì•„ ì˜¤ì§€ ëª»í•¨
í•´ê²° : project > properties > java build path > library > classpath > maven dependencies > Edit... > Maven project Setting - Resolve Dependencies from Workspace projects ë¥¼ ì²´í¬ í–ˆë‹¤ê°€ í’€ì—ˆë‹¤ê°€ ì €ì¥í•˜ê³  ì»´í“¨í„°ê¹Œì§€ ì¬ì‹œì‘í•˜ì§€ê¹Œ ë¨

---

## IntelliJ ì—ì„œ ì—´ê¸°

í”„ë¡œì íŠ¸ í´ë”ë§Œ ë³µì‚¬ì—ì„œ intellij-workspace í´ë”ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ ê·¸ ì•ˆì—ë‹¤ê°€ ë¶™ì—¬ë„£ê³ 

Current File ì—ì„œ Edit Configurations... í•˜ê³ 

Add new í•˜ê³ ì„œ apache server > local

URL: `http://localhost:80`
VM options: `-Dfile.encoding=UTF-8`
HTTP port: `80`
Warning: No artifacts marked for deployment ì—ì„œ fix ëˆ„ë¥´ê³ 
 `iei:war exploded` ì„ íƒ
Application context: `/`

---

### Happy Hacking  ğŸ‰
